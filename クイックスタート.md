# ⚡ AWS無料インフラ構築 クイックスタート

## 🎯 5分で始めるAWS無料インフラ構築

このガイドでは、最短時間でAWS無料インフラを構築する方法を説明します。

---

## 📋 前提条件チェック

### ✅ 必要なもの
- [ ] AWSアカウント（無料枠対応）
- [ ] クレジットカード（認証用）
- [ ] メールアドレス（アラート用）
- [ ] インターネット接続

### ✅ インストール済みツール
```bash
# 各ツールのバージョン確認
aws --version
terraform --version
node --version
```

**未インストールの場合は以下を実行：**
```bash
# macOS
brew install awscli terraform node

# Windows (Chocolatey)
choco install awscli terraform nodejs

# Ubuntu
sudo apt update && sudo apt install awscli terraform nodejs
```

---

## 🚀 超高速デプロイ（5分）

### Step 1: AWS認証情報設定
```bash
aws configure
# AWS Access Key ID: [入力]
# AWS Secret Access Key: [入力]
# Default region name: ap-northeast-1
# Default output format: json
```

### Step 2: デプロイ実行
```bash
# 実行権限付与
chmod +x deploy.sh

# デプロイ開始
./deploy.sh
```

### Step 3: メールアドレス入力
```
📧 アラート通知用メールアドレスを設定してください:
メールアドレス: your-email@example.com
```

### Step 4: 完了！
```
🎉 デプロイが完了しました！

📊 デプロイ情報:
   🌐 CloudFront URL: https://d1234567890abc.cloudfront.net
   📝 管理者ページ: https://d1234567890abc.cloudfront.net/admin.html
   パスワード: Password
```

---

## 🔍 動作確認（2分）

### 1. メインフォーム確認
1. **ブラウザでアクセス**: `https://[cloudfront-domain]`
2. **テストデータ入力**:
   - 氏名: `テスト太郎`
   - 生年月日: `1990-01-01`
   - マイナンバー: `123456789012`
   - メール: `test@example.com`
   - 電話: `090-1234-5678`
3. **送信**: 「送信する」ボタンをクリック

### 2. 管理者ページ確認
1. **アクセス**: `https://[cloudfront-domain]/admin.html`
2. **ログイン**: パスワード `Password`
3. **データ確認**: 送信したデータが表示されることを確認

---

## 📊 監視確認（1分）

### AWSコンソールで確認
1. **CloudWatch > アラーム**: 6個のアラームが作成済み
2. **SNS > トピック**: 通知設定済み
3. **Billing > Budgets**: $1/月の予算設定済み

### メール通知確認
- 設定したメールアドレスに確認メールが届いていることを確認
- スパムフォルダも確認

---

## 💰 コスト確認

### 無料枠内での動作
| サービス | 無料枠 | 使用量 | コスト |
|---------|--------|--------|--------|
| **S3** | 5GB/月 | ~1MB | **無料** |
| **CloudFront** | 1TB/月 | ~10GB/月 | **無料** |
| **Lambda** | 100万リクエスト/月 | ~1000/月 | **無料** |
| **API Gateway** | 100万リクエスト/月 | ~1000/月 | **無料** |
| **DynamoDB** | 25GB + 25WCU/25RCU | ~1GB | **無料** |
| **CloudWatch** | 10個まで | 6個 | **無料** |

**総コスト: 0円/月** 🎉

---

## 🛠️ カスタマイズ（オプション）

### 管理者パスワード変更
```bash
# terraform/main.tf で変更
variable "admin_password" {
  default = "YourNewPassword"
}
```

### アラート閾値調整
```bash
# terraform/main.tf で変更
threshold = "600000"  # 60%で通知
```

### カスタムドメイン設定
```bash
# Route 53でドメイン取得後
# terraform/main.tf に追加
resource "aws_route53_record" "website" {
  zone_id = "YOUR_ZONE_ID"
  name    = "your-domain.com"
  type    = "A"
  alias {
    name                   = aws_cloudfront_distribution.website_distribution.domain_name
    zone_id                = aws_cloudfront_distribution.website_distribution.hosted_zone_id
    evaluate_target_health = false
  }
}
```

---

## 🚨 トラブルシューティング

### よくある問題

#### 1. AWS認証情報エラー
```bash
aws configure
# 認証情報を再設定
```

#### 2. Terraform初期化エラー
```bash
cd terraform
terraform init -reconfigure
```

#### 3. ファイルが見つからない
```bash
ls -la
# 必要なファイルが存在することを確認
```

#### 4. 権限エラー
```bash
chmod +x deploy.sh
# 実行権限を付与
```

### ログ確認
```bash
# Lambda関数のログ
aws logs describe-log-groups --log-group-name-prefix "/aws/lambda/form-portfolio"

# API Gatewayのログ
aws logs describe-log-groups --log-group-name-prefix "API-Gateway"
```

---

## 🗑️ リソース削除

### 完全削除
```bash
cd terraform
terraform destroy
# 確認メッセージで「yes」を入力
```

### 手動削除（Terraformが失敗した場合）
```bash
# S3バケット
aws s3 rm s3://[bucket-name] --recursive
aws s3 rb s3://[bucket-name]

# Lambda関数
aws lambda delete-function --function-name form-portfolio-handler

# DynamoDBテーブル
aws dynamodb delete-table --table-name form-data-table

# CloudWatchアラーム
aws cloudwatch delete-alarms --alarm-names form-portfolio-lambda-invocations form-portfolio-api-requests form-portfolio-dynamodb-read-capacity form-portfolio-dynamodb-write-capacity form-portfolio-s3-bucket-size
```

---

## 📈 次のステップ

### 1. 機能拡張
- [ ] ユーザー認証機能追加
- [ ] ファイルアップロード機能
- [ ] リアルタイム通知機能
- [ ] データ分析機能

### 2. セキュリティ強化
- [ ] WAF（Web Application Firewall）追加
- [ ] 暗号化設定強化
- [ ] アクセスログ有効化
- [ ] バックアップ設定

### 3. パフォーマンス最適化
- [ ] キャッシュ戦略最適化
- [ ] CDN設定調整
- [ ] データベースインデックス最適化
- [ ] Lambda関数最適化

### 4. 監視強化
- [ ] カスタムメトリクス追加
- [ ] ダッシュボード作成
- [ ] アラート条件調整
- [ ] ログ分析設定

---

## 🎯 ポートフォリオ活用

### アピールポイント
- ✅ **完全無料**: 月額0円で運用可能
- ✅ **サーバーレス**: 最新のアーキテクチャ
- ✅ **自動スケーリング**: トラフィック対応
- ✅ **監視・アラート**: 運用技術
- ✅ **インフラコード化**: IaC実践
- ✅ **セキュリティ**: ベストプラクティス

### 技術スタック
- **フロントエンド**: HTML5, CSS3, JavaScript
- **バックエンド**: AWS Lambda, API Gateway
- **データベース**: DynamoDB
- **インフラ**: S3, CloudFront, Terraform
- **監視**: CloudWatch, SNS, Budgets

---

## 📞 サポート

### 問題が発生した場合
1. **エラーメッセージ**をコピー
2. **実行したコマンド**を記録
3. **詳細な手順書**を参照: [手順書.md](手順書.md)
4. **CloudWatchアラーム設定**を参照: [cloudwatch-alarms.md](cloudwatch-alarms.md)

### 参考資料
- [AWS無料枠](https://aws.amazon.com/jp/free/)
- [Terraform公式ドキュメント](https://www.terraform.io/docs)
- [CloudWatch料金](https://aws.amazon.com/jp/cloudwatch/pricing/)

---

## 🎉 完了！

**5分でAWS無料インフラ構築が完了しました！**

### 作成されたもの
- 🌐 **Webアプリケーション**: 個人情報入力フォーム
- 🔌 **サーバーレスAPI**: Lambda + API Gateway
- 🗄️ **データベース**: DynamoDB
- ⚡ **CDN**: CloudFront
- 🚨 **監視システム**: CloudWatch + SNS
- 📝 **インフラコード**: Terraform

**月額0円で運用可能な本格的なWebアプリケーション**が完成しました！🎊

---

*このプロジェクトはAWS無料枠の範囲内で動作し、完全に無料で運用できます。* 